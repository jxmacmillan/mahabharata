<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Depressing Table</title>
        <link rel="stylesheet" href="./style.css">
    </head>    
<body>
    <div id="main-title">
        <h1> Poverty in American School Districts</h1>
        <p> <em> Brought to you by the US Census Bureau </em></p>
    </div>

    <form id="search" onSubmit="myFunction()">
        <lable for="search-column">In Column:</lable>
        <select name="column" id="search-column">
            <option value="state">State</option>
            <option value="fips">State FIPS Code</option>
            <option value="dist-id">District ID</option>
            <option value="name">Name</option>
            <option value="total-population">Total Population</option>
            <option value="school-aged-population">School-Aged Population (5-17)</option>
            <option value="poor-kids">School-Aged Children in Poverty</option>
            <option value="poverty-rate">Poverty Rate</option>

        </select>
        <lable for="searchfor">Search for </lable>
        <input id="searchfor" type="text" />
        <select name="scope" id="search-scope">
            <option value="exact">Matches Exactly</option>
            <option value="contains">Contains</option>
            <option value="not-conains">Does Not Contain</option>
        </select>
    <input type="submit" id="submit-search" />
    </form>
  <table>
      <thead>
          <tr>
              <th><a href="javascript:myFunction()">State</a></th>
              <th>State FIPS Code</th>
              <th>District ID</th>
              <th>Name</th>
              <th>Total Population</th>
              <th>School-aged population (5-17)</th>
              <th>School-aged children in poverty</th>
              <th>Poverty Rate</th>
          </tr>
      </thead>
      <tbody>
          <tr>
              <td>AL</td>
              <td>01</td>
              <td>00190</td>
              <td>Alabaster City School District</td>
              <td>35,268</td>
              <td>6,797</td>
              <td>669</td>
              <td>9.84%</td>
          </tr>
      </tbody>
  </table>


<div id="demo">
  <h2>Display Data lol</h2>
  <button type="button" onclick="loadDoc()">click me daddy</button>
</div>
        
    function loadDoc() {
        <form id="myForm">
            <input type="file" id="csvFile" accept=".csv" />
        <br />
            <input type="submit" value="Submit" />
        </form>
        <script>
            const myForm = document.getElementById("myForm");
            const csvFile = document.getElementById("csvFile");

                myForm.addEventListener("submit", function (e) {
                e.preventDefault();
                const input = csvFile.files[0];
                const reader = new FileReader();

                reader.onload = function (e) {
                const text = e.target.result;
                document.write(text);
            };
            reader.readAsText(input);
        });
    </script>

    <script>
    function csvToArray(str, delimiter = ",") {
        // slice from start of text to the first \n index
        // use split to create an array from string by delimiter
        const headers = str.slice(0, str.indexOf("\n")).split(delimiter);
  
        // slice from \n index + 1 to the end of the text
        // use split to create an array of each csv value row
        const rows = str.slice(str.indexOf("\n") + 1).split("\n");
  
        // Map the rows
        // split values from each row into an array
        // use headers.reduce to create an object
        // object properties derived from headers:values
        // the object passed as an element of the array
        const arr = rows.map(function (row) {
        const values = row.split(delimiter);
        const el = headers.reduce(function (object, header, index) {
            object[header] = values[index];
            return object;
        }, {});
        return el;
        });
  
        // return the array
        return arr;
    }
    reader.onload = function (e) {
        const text = e.target.result;
        const data = csvToArray(text);
        document.write(JSON.stringify(data));
    };
    </script>
       
    </body>
</html>




